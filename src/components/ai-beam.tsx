"use client"

import React, { forwardRef, useRef } from "react"

import { cn } from "@/lib/utils"
import { AnimatedBeam } from "@/components/ui/animated-beam"

const Circle = forwardRef<
    HTMLDivElement,
    { className?: string; children?: React.ReactNode }
>(({ className, children }, ref) => {
    return (
        <div
            ref={ref}
            className={cn(
                "z-10 flex size-12 items-center justify-center rounded-full border-2 bg-white p-3 shadow-[0_0_20px_-12px_rgba(0,0,0,0.8)]",
                className
            )}
        >
            {children}
        </div>
    )
})

Circle.displayName = "Circle"

export function AiBeam() {
    const containerRef = useRef<HTMLDivElement>(null)
    const div1Ref = useRef<HTMLDivElement>(null)
    const div2Ref = useRef<HTMLDivElement>(null)

    return (
        <div
            className="relative flex w-full max-w-[500px] items-center justify-center overflow-hidden p-10"
            ref={containerRef}
        >
            <div className="flex size-full flex-col items-stretch justify-between gap-10">
                <div className="flex flex-row justify-between">
                    <Circle ref={div1Ref}>
                        <Icons.cv />
                    </Circle>
                    <Circle ref={div2Ref}>
                        <Icons.gemini />
                    </Circle>
                </div>
            </div>

            <AnimatedBeam
                containerRef={containerRef}
                fromRef={div1Ref}
                toRef={div2Ref}
                startYOffset={10}
                endYOffset={10}
                curvature={-20}
            />
            <AnimatedBeam
                containerRef={containerRef}
                fromRef={div1Ref}
                toRef={div2Ref}
                startYOffset={-10}
                endYOffset={-10}
                curvature={20}
                reverse
            />
        </div>
    )
}

const Icons = {
    gemini: () => (
        <svg width="128" height="128" viewBox="0 0 128 128" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M109.952 57.7867C101.092 54.015 93.0361 48.5821 86.2188 41.7814C76.7248 32.2685 69.9516 20.3867 66.6028 7.37071C66.4558 6.79262 66.1204 6.27998 65.6496 5.91382C65.1787 5.54767 64.5992 5.34888 64.0028 5.34888C63.4063 5.34888 62.8268 5.54767 62.356 5.91382C61.8851 6.27998 61.5497 6.79262 61.4028 7.37071C58.0469 20.385 51.2725 32.2654 41.7814 41.7814C34.9635 48.5813 26.9076 54.014 18.0481 57.7867C14.5814 59.28 11.0188 60.48 7.37077 61.4027C6.78913 61.5456 6.27221 61.8794 5.90266 62.3508C5.53311 62.8221 5.33228 63.4038 5.33228 64.0027C5.33228 64.6017 5.53311 65.1833 5.90266 65.6546C6.27221 66.126 6.78913 66.4598 7.37077 66.6027C11.0188 67.52 14.5708 68.72 18.0481 70.2134C26.9081 73.9851 34.9642 79.418 41.7814 86.2187C51.2779 95.7327 58.0531 107.616 61.4028 120.635C61.5457 121.216 61.8795 121.733 62.3508 122.103C62.8222 122.472 63.4038 122.673 64.0028 122.673C64.6017 122.673 65.1834 122.472 65.6547 122.103C66.126 121.733 66.4599 121.216 66.6028 120.635C67.5201 116.981 68.7201 113.429 70.2134 109.952C73.985 101.092 79.4179 93.0358 86.2188 86.2187C95.7335 76.7244 107.617 69.9511 120.635 66.6027C121.213 66.4558 121.726 66.1204 122.092 65.6495C122.458 65.1786 122.657 64.5992 122.657 64.0027C122.657 63.4062 122.458 62.8268 122.092 62.3559C121.726 61.8851 121.213 61.5496 120.635 61.4027C116.983 60.484 113.411 59.2748 109.952 57.7867Z" fill="#3186FF" />
            <path d="M109.952 57.7867C101.092 54.015 93.0361 48.5821 86.2188 41.7814C76.7248 32.2685 69.9516 20.3867 66.6028 7.37071C66.4558 6.79262 66.1204 6.27998 65.6496 5.91382C65.1787 5.54767 64.5992 5.34888 64.0028 5.34888C63.4063 5.34888 62.8268 5.54767 62.356 5.91382C61.8851 6.27998 61.5497 6.79262 61.4028 7.37071C58.0469 20.385 51.2725 32.2654 41.7814 41.7814C34.9635 48.5813 26.9076 54.014 18.0481 57.7867C14.5814 59.28 11.0188 60.48 7.37077 61.4027C6.78913 61.5456 6.27221 61.8794 5.90266 62.3508C5.53311 62.8221 5.33228 63.4038 5.33228 64.0027C5.33228 64.6017 5.53311 65.1833 5.90266 65.6546C6.27221 66.126 6.78913 66.4598 7.37077 66.6027C11.0188 67.52 14.5708 68.72 18.0481 70.2134C26.9081 73.9851 34.9642 79.418 41.7814 86.2187C51.2779 95.7327 58.0531 107.616 61.4028 120.635C61.5457 121.216 61.8795 121.733 62.3508 122.103C62.8222 122.472 63.4038 122.673 64.0028 122.673C64.6017 122.673 65.1834 122.472 65.6547 122.103C66.126 121.733 66.4599 121.216 66.6028 120.635C67.5201 116.981 68.7201 113.429 70.2134 109.952C73.985 101.092 79.4179 93.0358 86.2188 86.2187C95.7335 76.7244 107.617 69.9511 120.635 66.6027C121.213 66.4558 121.726 66.1204 122.092 65.6495C122.458 65.1786 122.657 64.5992 122.657 64.0027C122.657 63.4062 122.458 62.8268 122.092 62.3559C121.726 61.8851 121.213 61.5496 120.635 61.4027C116.983 60.484 113.411 59.2748 109.952 57.7867Z" fill="url(#paint0_linear_374_151)" />
            <path d="M109.952 57.7867C101.092 54.015 93.0361 48.5821 86.2188 41.7814C76.7248 32.2685 69.9516 20.3867 66.6028 7.37071C66.4558 6.79262 66.1204 6.27998 65.6496 5.91382C65.1787 5.54767 64.5992 5.34888 64.0028 5.34888C63.4063 5.34888 62.8268 5.54767 62.356 5.91382C61.8851 6.27998 61.5497 6.79262 61.4028 7.37071C58.0469 20.385 51.2725 32.2654 41.7814 41.7814C34.9635 48.5813 26.9076 54.014 18.0481 57.7867C14.5814 59.28 11.0188 60.48 7.37077 61.4027C6.78913 61.5456 6.27221 61.8794 5.90266 62.3508C5.53311 62.8221 5.33228 63.4038 5.33228 64.0027C5.33228 64.6017 5.53311 65.1833 5.90266 65.6546C6.27221 66.126 6.78913 66.4598 7.37077 66.6027C11.0188 67.52 14.5708 68.72 18.0481 70.2134C26.9081 73.9851 34.9642 79.418 41.7814 86.2187C51.2779 95.7327 58.0531 107.616 61.4028 120.635C61.5457 121.216 61.8795 121.733 62.3508 122.103C62.8222 122.472 63.4038 122.673 64.0028 122.673C64.6017 122.673 65.1834 122.472 65.6547 122.103C66.126 121.733 66.4599 121.216 66.6028 120.635C67.5201 116.981 68.7201 113.429 70.2134 109.952C73.985 101.092 79.4179 93.0358 86.2188 86.2187C95.7335 76.7244 107.617 69.9511 120.635 66.6027C121.213 66.4558 121.726 66.1204 122.092 65.6495C122.458 65.1786 122.657 64.5992 122.657 64.0027C122.657 63.4062 122.458 62.8268 122.092 62.3559C121.726 61.8851 121.213 61.5496 120.635 61.4027C116.983 60.484 113.411 59.2748 109.952 57.7867Z" fill="url(#paint1_linear_374_151)" />
            <path d="M109.952 57.7867C101.092 54.015 93.0361 48.5821 86.2188 41.7814C76.7248 32.2685 69.9516 20.3867 66.6028 7.37071C66.4558 6.79262 66.1204 6.27998 65.6496 5.91382C65.1787 5.54767 64.5992 5.34888 64.0028 5.34888C63.4063 5.34888 62.8268 5.54767 62.356 5.91382C61.8851 6.27998 61.5497 6.79262 61.4028 7.37071C58.0469 20.385 51.2725 32.2654 41.7814 41.7814C34.9635 48.5813 26.9076 54.014 18.0481 57.7867C14.5814 59.28 11.0188 60.48 7.37077 61.4027C6.78913 61.5456 6.27221 61.8794 5.90266 62.3508C5.53311 62.8221 5.33228 63.4038 5.33228 64.0027C5.33228 64.6017 5.53311 65.1833 5.90266 65.6546C6.27221 66.126 6.78913 66.4598 7.37077 66.6027C11.0188 67.52 14.5708 68.72 18.0481 70.2134C26.9081 73.9851 34.9642 79.418 41.7814 86.2187C51.2779 95.7327 58.0531 107.616 61.4028 120.635C61.5457 121.216 61.8795 121.733 62.3508 122.103C62.8222 122.472 63.4038 122.673 64.0028 122.673C64.6017 122.673 65.1834 122.472 65.6547 122.103C66.126 121.733 66.4599 121.216 66.6028 120.635C67.5201 116.981 68.7201 113.429 70.2134 109.952C73.985 101.092 79.4179 93.0358 86.2188 86.2187C95.7335 76.7244 107.617 69.9511 120.635 66.6027C121.213 66.4558 121.726 66.1204 122.092 65.6495C122.458 65.1786 122.657 64.5992 122.657 64.0027C122.657 63.4062 122.458 62.8268 122.092 62.3559C121.726 61.8851 121.213 61.5496 120.635 61.4027C116.983 60.484 113.411 59.2748 109.952 57.7867Z" fill="url(#paint2_linear_374_151)" />
            <defs>
                <linearGradient id="paint0_linear_374_151" x1="37.3334" y1="82.6667" x2="58.6668" y2="64" gradientUnits="userSpaceOnUse">
                    <stop stopColor="#08B962" />
                    <stop offset="1" stopColor="#08B962" stopOpacity="0" />
                </linearGradient>
                <linearGradient id="paint1_linear_374_151" x1="42.6668" y1="29.3334" x2="61.3334" y2="58.6667" gradientUnits="userSpaceOnUse">
                    <stop stopColor="#F94543" />
                    <stop offset="1" stopColor="#F94543" stopOpacity="0" />
                </linearGradient>
                <linearGradient id="paint2_linear_374_151" x1="18.6668" y1="72" x2="93.3334" y2="64" gradientUnits="userSpaceOnUse">
                    <stop stopColor="#FABC12" />
                    <stop offset="0.46" stopColor="#FABC12" stopOpacity="0" />
                </linearGradient>
            </defs>
        </svg>
    ),
    cv: () => (
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.1716 3H9C7.11438 3 6.17157 3 5.58579 3.58579C5 4.17157 5 5.11438 5 7V17C5 18.8856 5 19.8284 5.58579 20.4142C6.17157 21 7.11438 21 9 21H15C16.8856 21 17.8284 21 18.4142 20.4142C19 19.8284 19 18.8856 19 17V8.82843C19 8.41968 19 8.2153 18.9239 8.03153C18.8478 7.84776 18.7032 7.70324 18.4142 7.41421L14.5858 3.58579C14.2968 3.29676 14.1522 3.15224 13.9685 3.07612C13.7847 3 13.5803 3 13.1716 3Z" stroke="#33363F" strokeWidth="2" />
            <path d="M9 13L15 13" stroke="#33363F" strokeWidth="2" strokeLinecap="round" />
            <path d="M9 17L13 17" stroke="#33363F" strokeWidth="2" strokeLinecap="round" />
            <path d="M13 3V7C13 7.94281 13 8.41421 13.2929 8.70711C13.5858 9 14.0572 9 15 9H19" stroke="#33363F" strokeWidth="2" />
        </svg>
    ),
}
